var tour=new Tour({name:"speechtoolkit-frontend-tour",template:"<div class='popover tour'><div class='arrow'></div><h3 class='popover-title'></h3><div class='popover-content'></div><div class='popover-navigation'><button class='btn btn-default' data-role='next'>Next Â»</button><button class='btn btn-default' data-role='end'>End tour</button></div></div>",orphan:!0,steps:[{title:"Starting off",backdrop:!0,content:"Let's start with a small guided tour."},{title:"Play around",content:"Get yourself familiar with surroundings. Let's go to SNR chart."},{element:"#snr-chart",placement:"top",title:"SNR Chart",content:"Try to select SNR < -10 dB. See how that changes other graphs."},{element:"#a-accuracy-graphs-legends",placement:"right",title:"Accuracy Charts",content:"These are accuracy charts. They show relation between a feature's histogram and accuracy."},{element:"#accuracy-spr-chart",placement:"top",title:"Sample Insight",content:"Accuracy rate increases as the speaking rate increases, reaching a peak value, and then decreasing thereafter. Implying that there's a zone of good speaking rate, which is neither too high, nor too low."},{element:"#a-accuracy-graphs-legends",placement:"right",title:"More...",content:"Alright, let's try something cool."},{element:"#accuracy-chart",placement:"right",title:"Fixing your recognizer",content:"This is histogram chart of accuracy feature. To fix our recognizer, we want to see where it's making mistakes. Let's select accuracy < 0.4. Or, we can <a href='javascript:dc.filterAll();dc.redrawAll();graphArray[9].filter([0,0.4]);dc.redrawAll();'>do it</a> for you."},{element:"#filter-drop-down-menu",placement:"bottom",title:"Adding to comparison",content:"Here, you can add your selection for further comparison. Name your selection and click 'Add'. Or, click next and we will do it for you.",onNext:function(){var a=angular.element("#filter-navbar").scope();a.filters.length<1&&(dc.filterAll(),graphArray[9].filter([0,.4]),dc.redrawAll(),a.filterName="Accuracy < 0.4",a.addFilter(),a.$apply())},onShow:function(){$("#filter-dropdown").hasClass("open")||$("#filter-dropdown").addClass("open")}},{element:"#filter-drop-down-menu",placement:"bottom",title:"Adding to comparison",content:"Similarly, add a selection for accuracy > 0.6. Or, click next and we will do it for you.",onNext:function(){var a=angular.element("#filter-navbar").scope();a.filters.length<1?(dc.filterAll(),graphArray[9].filter([0,.4]),dc.redrawAll(),a.filterName="Accuracy < 0.4",a.addFilter(),a.$apply(),dc.filterAll(),graphArray[9].filter([.6,1]),dc.redrawAll(),a.filterName="Accuracy > 0.6",a.addFilter(),a.$apply(),$("#filter-dropdown").removeClass("open")):1===a.filters.length?(dc.filterAll(),graphArray[9].filter([.6,1]),dc.redrawAll(),a.filterName="Accuracy > 0.6",a.addFilter(),a.$apply()):2===a.filters.length},onShow:function(){$("#filter-dropdown").hasClass("open")||$("#filter-dropdown").addClass("open")}},{element:"#button-comparison",placement:"bottom",title:"Go to comparison",orphan:!1,content:"Now we have two or more datasets. Click on 'Compare' to go to comparison of seleted datasets, or click next.",onNext:function(){var a=angular.element("#filter-navbar").scope();a.filters.length<1?(dc.filterAll(),graphArray[9].filter([0,.4]),dc.redrawAll(),a.filterName="Accuracy < 0.4",a.addFilter(),a.$apply(),dc.filterAll(),graphArray[9].filter([.6,1]),dc.redrawAll(),a.filterName="Accuracy > 0.6",a.addFilter(),a.$apply(),$("#filter-dropdown").removeClass("open")):1===a.filters.length?(dc.filterAll(),graphArray[9].filter([.6,1]),dc.redrawAll(),a.filterName="Accuracy > 0.6",a.addFilter(),a.$apply()):2===a.filters.length,a=angular.element("#main-ctrl-container").scope(),a.toModule2(),a.$apply()},onShow:function(){$("#filter-dropdown").hasClass("open")&&$("#filter-dropdown").removeClass("open")}},{title:"Comparison",content:"And, you can see the comparison between two selections."},{element:"#accuracy-score-chart2",placement:"top",title:"Sample Insight",content:"Here, you can see that pronunciation scores for subset 1(Accuracy < 0.4) are consistently lower than subset 2(Accuracy > 0.6)"},{element:"#accuracy-f0-chart2",placement:"top",title:"Sample Insight",content:"Here, you can see that f0 values are higher for subset 1(Accuracy < 0.4) than subset 2(Accuracy > 0.6)"},{title:"End",content:"There are more things to explore, but this is the end of the guided tour. Please, report issues, feedback at <a href='mailto:malavbhavsar@cmu.edu'>malavbhavsar@cmu.edu</a>."}]});!function(){function a(a,b,c){return"undefined"==typeof c||0===+c?Math[a](b):(b=+b,c=+c,isNaN(b)||"number"!=typeof c||c%1!==0?0/0:(b=b.toString().split("e"),b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-c:-c))),b=b.toString().split("e"),+(b[0]+"e"+(b[1]?+b[1]+c:c))))}Math.round10||(Math.round10=function(b,c){return a("round",b,c)}),Math.floor10||(Math.floor10=function(b,c){return a("floor",b,c)}),Math.ceil10||(Math.ceil10=function(b,c){return a("ceil",b,c)})}();var graphArray=[],graphy=function(a){var b=dc.barChart("#gradelevel-chart"),c=dc.barChart("#intensity-chart"),d=dc.barChart("#f0-chart"),e=dc.barChart("#f1-chart"),f=dc.barChart("#f2-chart"),g=dc.barChart("#f3-chart"),h=dc.barChart("#snr-chart"),i=dc.barChart("#spr-chart"),j=dc.barChart("#score-chart"),k=dc.barChart("#accuracy-chart"),l=dc.compositeChartDoubleY("#accuracy-gradelevel-chart"),m=dc.compositeChartDoubleY("#accuracy-intensity-chart"),n=dc.compositeChartDoubleY("#accuracy-f0-chart"),o=dc.compositeChartDoubleY("#accuracy-f1-chart"),p=dc.compositeChartDoubleY("#accuracy-f2-chart"),q=dc.compositeChartDoubleY("#accuracy-f3-chart"),r=dc.compositeChartDoubleY("#accuracy-snr-chart"),s=dc.compositeChartDoubleY("#accuracy-spr-chart"),t=dc.compositeChartDoubleY("#accuracy-score-chart");graphArray=[b,c,d,e,f,g,h,i,j,k];var u=d3.csv.parse(a,function(a){d3.format(",d"),d3.format("+,d"),d3.time.format("%B %d, %Y"),d3.time.format("%I:%M %p"),d3.nest().key(function(a){return.1*Math.floor(a.accuracy/.1)});return a.filename=d3.requote(a.filename),a.gradelevel=d3.requote(a.gradelevel),a.intensity=+a.intensity,a.f0=+a.f0,a.f1=+a.f1,a.f2=+a.f2,a.f3=+a.f3,a.snr=+a.snr,a.spr=+a.spr,a.score=+a.score,a.accuracy=+a.accuracy,a.insertion=+a.insertion,a.deletion=+a.deletion,a.substitution=+a.substitution,a.words=+a.words,a}),v=function(a){var u=function(a){var b=[];return a.all().forEach(function(a){b.push(a.key)}),b},v=function(a,b){var c=b-a;if(c>=10){var d=c/20,d=Math.ceil(d),e=20*d,f=Math.floor(a),g=f+e;return[f,g]}if(10>c&&c>=5){var d=c/10,d=Math.ceil(d),e=10*d,f=Math.floor(a),g=f+e;return[f,g]}var d=c/10,d=Math.ceil10(d,-1),e=10*d,f=Math.floor(a),g=f+e;return[f,g+d]},w=function(a,b){var c=b-a;if(c>=10){var d=c/20,d=Math.ceil(d);return d}if(10>c&&c>=5){var d=c/10,d=Math.ceil(d);return d}var d=c/10,d=Math.ceil10(d,-1);return d},x=function(a,b){return a.words+=b.words,a.insertion+=b.insertion,a.deletion+=b.deletion,a.substitution+=b.substitution,a},y=function(a,b){return a.words-=b.words,a.insertion-=b.insertion,a.deletion-=b.deletion,a.substitution-=b.substitution,a},z=function(){return{words:0,insertion:0,deletion:0,substitution:0}},A=d3.min(a,function(a){return a.intensity}),B=d3.min(a,function(a){return a.f0}),C=d3.min(a,function(a){return a.f1}),D=d3.min(a,function(a){return a.f2}),E=d3.min(a,function(a){return a.f3}),F=d3.min(a,function(a){return a.snr}),G=d3.min(a,function(a){return a.spr}),H=d3.min(a,function(a){return a.score}),I=d3.min(a,function(a){return a.accuracy}),J=d3.max(a,function(a){return a.intensity}),K=d3.max(a,function(a){return a.f0}),L=d3.max(a,function(a){return a.f1}),M=d3.max(a,function(a){return a.f2}),N=d3.max(a,function(a){return a.f3}),O=d3.max(a,function(a){return a.snr}),P=d3.max(a,function(a){return a.spr}),Q=d3.max(a,function(a){return a.score}),R=d3.max(a,function(a){return a.accuracy}),S=[v(A,J),v(B,K),v(C,L),v(D,M),v(E,N),v(F,O),v(G,P),v(H,Q),v(I,R)],T=[w(A,J),w(B,K),w(C,L),w(D,M),w(E,N),w(F,O),w(G,P),w(H,Q),w(I,R)],U=crossfilter(a),V=U.groupAll(),W=U.dimension(function(a){return a.gradelevel}),X=W.group(function(a){return a}),Y=U.dimension(function(a){return a.intensity}),Z=Y.group(function(a){return Math.floor(a/T[0])*T[0]}),_=U.dimension(function(a){return a.f0}),ab=_.group(function(a){return Math.floor(a/T[1])*T[1]}),bb=U.dimension(function(a){return a.f1}),cb=bb.group(function(a){return Math.floor(a/T[2])*T[2]}),db=U.dimension(function(a){return a.f2}),eb=db.group(function(a){return Math.floor(a/T[3])*T[3]}),fb=U.dimension(function(a){return a.f3}),gb=fb.group(function(a){return Math.floor(a/T[4])*T[4]}),hb=U.dimension(function(a){return a.snr}),ib=hb.group(function(a){return Math.floor(a/T[5])*T[5]}),jb=U.dimension(function(a){return a.spr}),kb=jb.group(function(a){return Math.floor(a/T[6])*T[6]}),lb=U.dimension(function(a){return a.score}),mb=lb.group(function(a){return Math.floor(a/T[7])*T[7]}),nb=U.dimension(function(a){return a.accuracy}),ob=nb.group(function(a){return Math.floor(a/T[8],-1)*T[8]});b.margins({top:10,right:45,bottom:30,left:45}).width(280).dimension(W).group(X).x(d3.scale.ordinal().domain(["0"].concat(u(X)))).xUnits(dc.units.ordinal).centerBar(!0).on("postRender",function(a){a.svg().append("text").attr("class","y-label").attr("text-anchor","end").attr("x",-25).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files")}),c.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(Y).group(Z).x(d3.scale.linear().domain(S[0])).xUnits(function(){return 20}).on("postRender",function(a){a.svg().append("text").attr("class","y-label").attr("text-anchor","end").attr("x",-25).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files")}),d.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(_).group(ab).x(d3.scale.linear().domain(S[1])).xUnits(function(){return 20}).on("postRender",function(a){a.svg().append("text").attr("class","y-label").attr("text-anchor","end").attr("x",-25).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files")}),e.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(bb).group(cb).x(d3.scale.linear().domain(S[2])).xUnits(function(){return 20}).on("postRender",function(a){a.svg().append("text").attr("class","y-label").attr("text-anchor","end").attr("x",-25).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files")}),f.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(db).group(eb).x(d3.scale.linear().domain(S[3])).xUnits(function(){return 20}).on("postRender",function(a){a.svg().append("text").attr("class","y-label").attr("text-anchor","end").attr("x",-25).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files")}),g.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(fb).group(gb).x(d3.scale.linear().domain(S[4])).xUnits(function(){return 20}).on("postRender",function(a){a.svg().append("text").attr("class","y-label").attr("text-anchor","end").attr("x",-25).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files")}),h.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(hb).group(ib).x(d3.scale.linear().domain(S[5])).xUnits(function(){return 20}).on("postRender",function(a){a.svg().append("text").attr("class","y-label").attr("text-anchor","end").attr("x",-25).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files")}),i.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(jb).group(kb).x(d3.scale.linear().domain(S[6])).on("postRender",function(a){a.svg().append("text").attr("class","y-label").attr("text-anchor","end").attr("x",-25).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files")}),j.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(lb).group(mb).x(d3.scale.linear().domain(S[7])).on("postRender",function(a){a.svg().append("text").attr("class","y-label").attr("text-anchor","end").attr("x",-25).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files")}),k.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(nb).group(ob).x(d3.scale.linear().domain(S[8])).xUnits(function(){return 11}).on("postRender",function(a){a.svg().append("text").attr("class","y-label").attr("text-anchor","end").attr("x",-25).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files")});var pb=W.group().reduce(x,y,z),qb=Y.group(function(a){return Math.floor(a/T[0])*T[0]}).reduce(x,y,z),rb=_.group(function(a){return Math.floor(a/T[1])*T[1]}).reduce(x,y,z),sb=bb.group(function(a){return Math.floor(a/T[2])*T[2]}).reduce(x,y,z),tb=db.group(function(a){return Math.floor(a/T[3])*T[3]}).reduce(x,y,z),ub=fb.group(function(a){return Math.floor(a/T[4])*T[4]}).reduce(x,y,z),vb=hb.group(function(a){return Math.floor(a/T[5])*T[5]}).reduce(x,y,z),wb=jb.group(function(a){return Math.floor(a/T[6])*T[6]}).reduce(x,y,z),xb=lb.group(function(a){return Math.floor(a/T[7])*T[7]}).reduce(x,y,z);l.margins({top:10,right:45,bottom:30,left:45}).width(280).dimension(W).group(X).x(d3.scale.ordinal().domain(["0"].concat(u(X)))).xUnits(dc.units.ordinal).compose([dc.barChart(l).group(X).centerBar(!0).clickEnabled(!1),dc.lineChart(l).y(d3.scale.linear().domain([0,1])).group(pb).valueAccessor(function(a){return 1*(a.value.words-a.value.insertion-a.value.deletion-a.value.substitution)/a.value.words})]).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("Grade")}),m.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(Y).group(Z).x(d3.scale.linear().domain(S[0])).xUnits(function(){return 20}).compose([dc.barChart(m).group(Z),dc.lineChart(m).y(d3.scale.linear().domain([0,1])).group(qb).valueAccessor(function(a){return 1*(a.value.words-a.value.insertion-a.value.deletion-a.value.substitution)/a.value.words})]).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()+15).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("Intensity")}),n.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(_).group(ab).x(d3.scale.linear().domain(S[1])).xUnits(function(){return 20}).compose([dc.barChart(n).group(ab),dc.lineChart(n).y(d3.scale.linear().domain([0,1])).group(rb).valueAccessor(function(a){return 1*(a.value.words-a.value.insertion-a.value.deletion-a.value.substitution)/a.value.words})]).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()+15).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("F0")}),o.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(bb).group(cb).x(d3.scale.linear().domain(S[2])).xUnits(function(){return 20}).compose([dc.barChart(o).group(cb),dc.lineChart(o).y(d3.scale.linear().domain([0,1])).group(sb).valueAccessor(function(a){return 1*(a.value.words-a.value.insertion-a.value.deletion-a.value.substitution)/a.value.words})]).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()+15).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("F1")}),p.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(db).group(eb).x(d3.scale.linear().domain(S[3])).xUnits(function(){return 20}).compose([dc.barChart(p).group(eb),dc.lineChart(p).y(d3.scale.linear().domain([0,1])).group(tb).valueAccessor(function(a){return 1*(a.value.words-a.value.insertion-a.value.deletion-a.value.substitution)/a.value.words})]).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()+15).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("F2")}),q.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(fb).group(gb).x(d3.scale.linear().domain(S[4])).xUnits(function(){return 20}).compose([dc.barChart(q).group(gb),dc.lineChart(q).y(d3.scale.linear().domain([0,1])).group(ub).valueAccessor(function(a){return 1*(a.value.words-a.value.insertion-a.value.deletion-a.value.substitution)/a.value.words})]).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()+15).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("F3")}),r.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(hb).group(ib).x(d3.scale.linear().domain(S[5])).xUnits(function(){return 20}).compose([dc.barChart(r).group(ib),dc.lineChart(r).y(d3.scale.linear().domain([0,1])).group(vb).valueAccessor(function(a){return 1*(a.value.words-a.value.insertion-a.value.deletion-a.value.substitution)/a.value.words})]).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()+15).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("SNR")}),s.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(jb).group(kb).x(d3.scale.linear().domain(S[6])).xUnits(function(){return 10}).compose([dc.barChart(s).group(kb),dc.lineChart(s).y(d3.scale.linear().domain([0,1])).group(wb).valueAccessor(function(a){return 1*(a.value.words-a.value.insertion-a.value.deletion-a.value.substitution)/a.value.words})]).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()+15).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("SPR")}),t.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(lb).group(mb).x(d3.scale.linear().domain(S[7])).xUnits(function(){return 10}).compose([dc.barChart(t).group(mb),dc.lineChart(t).y(d3.scale.linear().domain([0,1])).group(xb).valueAccessor(function(a){return 1*(a.value.words-a.value.insertion-a.value.deletion-a.value.substitution)/a.value.words})]).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()+15).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("Score")});for(var yb=0;yb<graphArray.length;yb++)graphArray[yb].on("filtered",function(a){Raven.captureMessage((new Date).toUTCString()+",FILTER,Filter Change,"+JSON.stringify({extra:{chart:a.anchor(),filter:a.filters()}}))});dc.dataTable("#speech-table").dimension(nb).group(function(a){return"Accuracy <= "+.1*Math.ceil(a.accuracy/.1)}).size(1/0).columns([function(a){return a.filename},function(a){return a.snr},function(a){return a.accuracy}]).order(d3.descending).trAttrs({"data-type":function(){return"inline-audio"},"data-content":function(a){return a.filename+".wav"},"data-root":function(){return"http://speechkitchen.org/TestData3/"}}),dc.dataCount("#audio-files-count").dimension(U).group(V),dc.renderAll(),dc.redrawAll(),$("table").table("show"),console.log("initing"),tour.init(),console.log("starting"),tour.start()};v(u)};!function(){function a(a,b,c){return"undefined"==typeof c||0===+c?Math[a](b):(b=+b,c=+c,isNaN(b)||"number"!=typeof c||c%1!==0?0/0:(b=b.toString().split("e"),b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-c:-c))),b=b.toString().split("e"),+(b[0]+"e"+(b[1]?+b[1]+c:c))))}Math.round10||(Math.round10=function(b,c){return a("round",b,c)}),Math.floor10||(Math.floor10=function(b,c){return a("floor",b,c)}),Math.ceil10||(Math.ceil10=function(b,c){return a("ceil",b,c)})}();var graphy2=function(a,b){var c=dc.compositeChartDoubleY("#accuracy-gradelevel-chart2"),d=dc.compositeChartDoubleY("#accuracy-intensity-chart2"),e=dc.compositeChartDoubleY("#accuracy-f0-chart2"),f=dc.compositeChartDoubleY("#accuracy-f1-chart2"),g=dc.compositeChartDoubleY("#accuracy-f2-chart2"),h=dc.compositeChartDoubleY("#accuracy-f3-chart2"),i=dc.compositeChartDoubleY("#accuracy-snr-chart2"),j=dc.compositeChartDoubleY("#accuracy-spr-chart2"),k=dc.compositeChartDoubleY("#accuracy-score-chart2"),l=d3.csv.parse(a,function(a){d3.format(",d"),d3.format("+,d"),d3.time.format("%B %d, %Y"),d3.time.format("%I:%M %p"),d3.nest().key(function(a){return.1*Math.floor(a.accuracy/.1)});return a.filename=d3.requote(a.filename),a.intensity=+a.intensity,a.f0=+a.f0,a.f1=+a.f1,a.f2=+a.f2,a.f3=+a.f3,a.snr=+a.snr,a.spr=+a.spr,a.score=+a.score,a.accuracy=+a.accuracy,a.insertion=+a.insertion,a.deletion=+a.deletion,a.substitution=+a.substitution,a.words=+a.words,a}),m=function(a){for(var l=function(a){var b=[];return a.all().forEach(function(a){b.push(a.key)}),b},m=function(a,b){var c=b-a;if(c>=10){var d=c/20,d=Math.ceil(d),e=20*d,f=Math.floor(a),g=f+e;return[f,g]}if(10>c&&c>=5){var d=c/10,d=Math.ceil(d),e=10*d,f=Math.floor(a),g=f+e;return[f,g]}var d=c/10,d=Math.ceil10(d,-1),e=10*d,f=Math.floor(a),g=f+e;return[f,g+d]},n=function(a,b){var c=b-a;if(c>=10){var d=c/20,d=Math.ceil(d);return d}if(10>c&&c>=5){var d=c/10,d=Math.ceil(d);return d}var d=c/10,d=Math.ceil10(d,-1);return d},o=function(a,b){return a.words+=b.words,a.insertion+=b.insertion,a.deletion+=b.deletion,a.substitution+=b.substitution,a},p=function(a,b){return a.words-=b.words,a.insertion-=b.insertion,a.deletion-=b.deletion,a.substitution-=b.substitution,a},q=function(){return{words:0,insertion:0,deletion:0,substitution:0}},r=function(a,c,d){for(var d="undefined"!=typeof d?d:!0,e=[],f=dc.barChart(a).clickEnabled(d).dimension(M[0][c]).group(N[0][c]).groupBars(!0),g=1;g<b.length;g++)var f=f.stack(N[g][c]);e.push(f);for(var h=0;h<b.length;h++){var i=dc.lineChart(a).dimension(M[0][c]).y(d3.scale.linear().domain([0,1])).group(O[h][c]).valueAccessor(function(a){return 1*(a.value.words-a.value.insertion-a.value.deletion-a.value.substitution)/a.value.words});e.push(i)}return e},s=d3.min(a,function(a){return a.intensity}),t=d3.min(a,function(a){return a.f0}),u=d3.min(a,function(a){return a.f1}),v=d3.min(a,function(a){return a.f2}),w=d3.min(a,function(a){return a.f3}),x=d3.min(a,function(a){return a.snr}),y=d3.min(a,function(a){return a.spr}),z=d3.min(a,function(a){return a.score}),A=d3.min(a,function(a){return a.accuracy}),B=d3.max(a,function(a){return a.intensity}),C=d3.max(a,function(a){return a.f0}),D=d3.max(a,function(a){return a.f1}),E=d3.max(a,function(a){return a.f2}),F=d3.max(a,function(a){return a.f3}),G=d3.max(a,function(a){return a.snr}),H=d3.max(a,function(a){return a.spr}),I=d3.max(a,function(a){return a.score}),J=d3.max(a,function(a){return a.accuracy}),K=[m(s,B),m(t,C),m(u,D),m(v,E),m(w,F),m(x,G),m(y,H),m(z,I),m(A,J)],L=[n(s,B),n(t,C),n(u,D),n(v,E),n(w,F),n(x,G),n(y,H),n(z,I),n(A,J)],M=[],N=[],O=[],P=function(a){return 0==a.length?null:a[0]},Q=0;Q<b.length;Q++){var R=crossfilter(a),S=(R.groupAll(),R.dimension(function(a){return a.gradelevel}).filter(P(b[Q].array[0]))),T=R.dimension(function(a){return a.intensity}).filter(P(b[Q].array[1])),U=R.dimension(function(a){return a.f0}).filter(P(b[Q].array[2])),V=R.dimension(function(a){return a.f1}).filter(P(b[Q].array[3])),W=R.dimension(function(a){return a.f2}).filter(P(b[Q].array[4])),X=R.dimension(function(a){return a.f3}).filter(P(b[Q].array[5])),Y=R.dimension(function(a){return a.snr}).filter(P(b[Q].array[6])),Z=R.dimension(function(a){return a.spr}).filter(P(b[Q].array[7])),_=R.dimension(function(a){return a.score}).filter(P(b[Q].array[8])),ab=R.dimension(function(a){return a.accuracy}).filter(P(b[Q].array[9])),bb=crossfilter(Y.top(1/0)),S=(bb.groupAll(),bb.dimension(function(a){return a.gradelevel})),cb=S.group(function(a){return a}),T=bb.dimension(function(a){return a.intensity}),db=T.group(function(a){return Math.floor(a/L[0])*L[0]}),U=bb.dimension(function(a){return a.f0}),eb=U.group(function(a){return Math.floor(a/L[1])*L[1]}),V=bb.dimension(function(a){return a.f1}),fb=V.group(function(a){return Math.floor(a/L[2])*L[2]}),W=bb.dimension(function(a){return a.f2}),gb=W.group(function(a){return Math.floor(a/L[3])*L[3]}),X=bb.dimension(function(a){return a.f3}),hb=X.group(function(a){return Math.floor(a/L[4])*L[4]}),Y=bb.dimension(function(a){return a.snr}),ib=Y.group(function(a){return Math.floor(a/L[5])*L[5]}),Z=R.dimension(function(a){return a.spr}),jb=Z.group(function(a){return Math.floor(a/L[6])*L[6]}),_=R.dimension(function(a){return a.score}),kb=_.group(function(a){return Math.floor(a/L[7])*L[7]}),ab=R.dimension(function(a){return a.accuracy}),lb=ab.group(function(a){return Math.floor(a/L[8],-1)*L[8]}),mb=S.group().reduce(o,p,q),nb=T.group(function(a){return Math.floor(a/L[0])*L[0]}).reduce(o,p,q),ob=U.group(function(a){return Math.floor(a/L[1])*L[1]}).reduce(o,p,q),pb=V.group(function(a){return Math.floor(a/L[2])*L[2]}).reduce(o,p,q),qb=W.group(function(a){return Math.floor(a/L[3])*L[3]}).reduce(o,p,q),rb=X.group(function(a){return Math.floor(a/L[4])*L[4]}).reduce(o,p,q),sb=Y.group(function(a){return Math.floor(a/L[5])*L[5]}).reduce(o,p,q),tb=Z.group(function(a){return Math.floor(a/L[6])*L[6]}).reduce(o,p,q),ub=_.group(function(a){return Math.floor(a/L[7])*L[7]}).reduce(o,p,q);M.push([S,T,U,V,W,X,Y,Z,_,ab]),N.push([cb,db,eb,fb,gb,hb,ib,jb,kb,lb]),O.push([mb,nb,ob,pb,qb,rb,sb,tb,ub])}S=R.dimension(function(a){return a.gradelevel}),cb=S.group(function(a){return a}),T=R.dimension(function(a){return a.intensity}),db=T.group(function(a){return Math.floor(a/L[0])*L[0]}),U=R.dimension(function(a){return a.f0}),eb=U.group(function(a){return Math.floor(a/L[1])*L[1]}),V=R.dimension(function(a){return a.f1}),fb=V.group(function(a){return Math.floor(a/L[2])*L[2]}),W=R.dimension(function(a){return a.f2}),gb=W.group(function(a){return Math.floor(a/L[3])*L[3]}),X=R.dimension(function(a){return a.f3}),hb=X.group(function(a){return Math.floor(a/L[4])*L[4]}),Y=R.dimension(function(a){return a.snr}),ib=Y.group(function(a){return Math.floor(a/L[5])*L[5]}),Z=R.dimension(function(a){return a.spr}),jb=Z.group(function(a){return Math.floor(a/L[6])*L[6]}),_=R.dimension(function(a){return a.score}),kb=_.group(function(a){return Math.floor(a/L[7])*L[7]}),ab=R.dimension(function(a){return a.accuracy}),lb=ab.group(function(a){return Math.floor(a/L[8],-1)*L[8]}),c.margins({top:10,right:45,bottom:30,left:45}).width(280).dimension(S).group(cb).x(d3.scale.ordinal().domain(["0"].concat(l(cb)))).xUnits(dc.units.ordinal).compose(r(c,0,!1)).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("Grade")}),d.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(T).group(db).x(d3.scale.linear().domain(K[0])).xUnits(function(){return 20}).compose(r(d,1)).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()+15).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("Intensity")}),e.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(U).group(eb).x(d3.scale.linear().domain(K[1])).xUnits(function(){return 20}).compose(r(e,2)).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()+15).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("F0")}),f.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(V).group(fb).x(d3.scale.linear().domain(K[2])).xUnits(function(){return 20}).compose(r(f,3)).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()+15).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("F1")}),g.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(W).group(gb).x(d3.scale.linear().domain(K[3])).xUnits(function(){return 20}).compose(r(g,4)).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()+15).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("F2")
}),h.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(X).group(hb).x(d3.scale.linear().domain(K[4])).xUnits(function(){return 20}).compose(r(h,5)).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()+15).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("F3")}),i.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(Y).group(ib).x(d3.scale.linear().domain(K[5])).xUnits(function(){return 20}).compose(r(i,6)).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()+15).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("SNR")}),j.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(Z).group(jb).x(d3.scale.linear().domain(K[6])).compose(r(j,7)).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()+15).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("SPR")}),k.margins({top:10,right:45,bottom:30,left:45}).width(470).dimension(_).group(kb).x(d3.scale.linear().domain(K[7])).compose(r(k,8)).brushOn(!1).on("postRender",function(a){a.svg().append("text").attr("class","y2-label").attr("text-anchor","middle").attr("x",-80).attr("y",a.width()+15).attr("dy","-25").attr("transform","rotate(-90)").text("accuracy"),a.svg().append("text").attr("class","y-label").attr("text-anchor","middle").attr("x",-80).attr("y",40).attr("dy","-25").attr("transform","rotate(-90)").text("no. of audio files"),a.svg().append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",a.width()/2).attr("y",a.height()-2).text("Score")}),dc.renderAll(),dc.redrawAll(),$("#spyOnThis").scrollspy({offset:71})};m(l)};